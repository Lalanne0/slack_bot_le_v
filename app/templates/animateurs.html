{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">ğŸ¤ Animateurs</h2>

<form method="get" class="row g-2 mb-4" role="search">
  <div class="col-sm-8 col-md-6">
    <input type="search" class="form-control" name="q" placeholder="Rechercher un animateur..."
           value="{{ q or '' }}" aria-label="Rechercher un animateur">
  </div>
  <div class="col-sm-auto">
    <button type="submit" class="btn btn-primary">Rechercher</button>
    {% if q %}
      <a href="{{ url_for('main.animateurs') }}" class="btn btn-outline-secondary">Effacer</a>
    {% endif %}
  </div>
</form>

{% if animateurs_by_role %}
  <div class="mb-4">
    {% for role, names in animateurs_by_role.items() %}
      <details class="mb-3 border rounded" {% if q %}open{% endif %}>
        <summary class="py-2 px-3 d-flex justify-content-between align-items-center">
          <span>{{ role }}</span>
          <span class="badge bg-secondary">{{ names|length }}</span>
        </summary>
        <ul class="list-group list-group-flush">
          {% for a in names %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <a href="{{ url_for('main.animateur_detail', animateur=a) }}" class="text-decoration-none">{{ a }}</a>
              <a href="{{ url_for('main.animateur_detail', animateur=a) }}" class="btn btn-sm btn-outline-primary">Voir</a>
            </li>
          {% endfor %}
        </ul>
      </details>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info">Aucun animateur trouvÃ©{% if q %} pour Â« {{ q }} Â»{% endif %}.</div>
{% endif %}

<p class="mt-4">
  <a href="{{ url_for('main.dashboard') }}" class="btn btn-outline-secondary">â† Retour au dashboard</a>
</p>

{% endblock %}
